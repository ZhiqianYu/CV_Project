{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="{% static 'favicon.ico' %}" type="image/x-icon">

    <title>Video List</title>
    
    <!--css File loader-->
    <link rel="stylesheet" href="{% static 'navbar.css' %}">
    <link rel="stylesheet" href="{% static 'search.css' %}">
    <link rel="stylesheet" href="{% static 'ripple.css' %}">
    <link rel="stylesheet" href="{% static 'videos.css' %}">

    <!--js File loader-->
    <script src="{% static 'ripples.js' %}"></script>
    <script src="{% static 'search.js' %}"></script>
    <script src="{% static 'filter.js' %}"></script>

</head>

<body>
    <!-- 导航栏 -->
    <div class="navbar">
        <!-- Left section of the navbar -->
        <div class="navbar-left">
            <a href="{% url 'introduction' %}" class="navbar-title">Frame Annotator</a>
            <a href="{% url 'upload' %}" class="navbar-l-link">Upload</a>
            <a href="{% url 'video_list' %}" class="navbar-l-link">Videos</a>
            <a href="#exports" class="navbar-l-link">Exports</a>
        </div>
    
        <!-- Right section of the navbar -->
        <div class="navbar-right">
            {% if user.is_authenticated  %}
            <a href="{% url 'login' %}" class='login-inf'>Welcome, {{ user.username }}!</a>
            <a href="{% url 'logout' %}" class='navbar-logout'>Logout</a>
            {% else  %}
            <a href="{% url 'login' %}" class="navbar-login">Login</a>
            <span class="navbar-separator">|</span>
            <a href="{% url 'register' %}" class="navbar-register">Register</a>
            {% endif  %}
            <div class="search-container">
                <input type="text" placeholder="Search...">
                <div class="search-icon" onclick="performSearch()">
                    <span>&#128269;</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 筛选功能 -->
    <div class="filter-container">
        <form id="filterForm" method="get" action="{% url 'video_list' %}">
            <div>
                <label for="uploader">Uploader:</label>
                <input type="text" name="uploader" value="" value="{{ uploader_filter }}">
            </div>

            <div>
                <label for="order_by">Order by:</label>
                <select name="order_by" class="filter-select" id="order-by-select">
                    <option value="---">---</option>
                    <option value="filename" {% if order_by == 'filename' %}selected{% endif %}>Filename</option>
                    <option value="upload_time" {% if order_by == 'upload_time' %}selected{% endif %}>Upload Time</option>
                    <option value="is_annotated" {% if order_by == 'is_annotated' %}selected{% endif %}>Annotated</option>
                    <option value="not_annotated" {% if order_by == 'not_annotated' %}selected{% endif %}>Not Annotated</option> 
                </select>
            </div>
            
            <div>
                <button type="button" onclick="submitForm()">Apply Filters</button>
            </div>
        </form>
    </div>

    <!-- 视频列表 -->
    <div class="video-grid">
        {% for video in videos %}
            <div class="video-item">
                <div class="video-preview">
                    <a href="{{ MEDIA_URL }}{{ video.video_file_relative_path }}">
                        <img src="{{ MEDIA_URL }}{{ video.preview_file_relative_path }}" alt="No Preview Image">
                    </a>
                    <div class="annotation-overlay">
                        <a href="{% url 'annotation' video.id %}">
                            <p class="annotation-info">{% if video.annotated %}Annotated{% else %}Not Annotated{% endif %}</p>
                        </a>
                    </div>
                </div>
                <div class="video-description">
                    <a href="{{ MEDIA_URL }}{{ video.video_file_relative_path }}">
                        <p class="file">Title:{{ video.file_name }}</p>
                    </a>
                    <p class="uploader">Uploader: <a href="{{ video.uploader.url }}">{{ video.uploader }}</a></p>
                    <p class="upload-time">Upload Time: {{ video.upload_time }}</p>
                </div>
            </div>
        {% endfor %}
    </div>
    
</body>
</html>
