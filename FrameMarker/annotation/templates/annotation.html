{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Annotation Tool</title>
    
    <!--css File loader-->
    <link rel="stylesheet" href="{% static 'navbar.css' %}">
    <link rel="stylesheet" href="{% static 'annotation.css' %}">
    <link rel="stylesheet" href="{% static 'search.css' %}">

    <!--js File loader-->
    <script src="{% static 'search.js' %}"></script>

    <script src="{% static 'framegeneration.js' %}"></script>
    <script src="{% static 'framedisplay.js' %}"></script>
    
    <!-- 引入 jQuery 库 -->
    

    <!-- 引入处理表单提交的JavaScript文件 -->
    <script src="{% static 'upload.js' %}"></script>
    <script src="{% static 'user.js' %}"></script>

</head>

<body>

    <!-- 导航栏 -->
    <div class="navbar">
        <!-- Left section of the navbar -->
        <div class="navbar-left">
            <a href="{% url 'introduction' %}" class="navbar-title">Frame Annotator</a>
            <a href="{% url 'upload' %}" class="navbar-l-link">Upload</a>
            <a href="{% url 'video_list' %}" class="navbar-l-link">Videos</a>
        </div>

        <!-- Right section of the navbar -->
        <div class="navbar-right">
            {% if user.is_authenticated  %}
            <a href="{% url 'login' %}" class='login-inf'>Welcome, {{ user.username }}!</a>
            <a href="{% url 'logout' %}" class='navbar-logout'>Logout</a>
            {% else  %}
            <a href="{% url 'login' %}" class="navbar-login">Login</a>
            <span class="navbar-separator">|</span>
            <a href="{% url 'register' %}" class="navbar-register">Register</a>
            {% endif  %}
        </div>
    </div>
    
    <!-- Page Content -->
    <!-- Video Info -->
    <div class="video-info">
        <a href="{{ video.video_file.url }}" class="file-name">Current Video: {{ filename }}</a>
        <span class="separator">|</span>
        <a href="{{ video.uploader.url }}" class="uploader">Uploader: {{ uploader }}</a>
    </div>

    <!-- First Part -->
    <!-- video player and 60 frames -->
    <div class="player-frames">
        <div class="player-btns">
            <div class="video-player">
                <video id="VideoLoaded" controls="false">
                    <source src="{{ MEDIA_URL }}{{ video.video_file }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
            <div class="btn-container">
                <div class="player-controls">
                    <button id="playPauseBtn">Play</button>
                    <button id="framegenerationBtn" onclick="generateFrames({{ video.id }})">Frame Generation</button>
                    <button id="saveBtn">Save Annotation</button>
                    <button id="exportBtn">Export</button>
                    <div id="buttonStatus"></div>
                </div>
            </div>
        </div>
        <div class="frames-btns">  
            <div class="frames-container">
                    {% for frame_path in frame_paths_60 %}
                        <div class="frames-60" >
                            <img src="{{ MEDIA_URL }}{{ frame_path }}" alt="frame">
                        </div>
                    {% endfor %}
            </div>
            <div class="btn-container">  
                <div class="frame-rank">
                    <div class="choosed-frame">Choosed Frame: <span id="choosed-frame-number">{{ choosed_frame_number }}</span></div>
                    <span class="separator">|</span>
                    <button id="rank0">Sehr schlecht</button>
                    <button id="rank1">Schlecht</button>
                    <button id="rank2">Durchschnittlich</button>
                    <button id="rank3">Gut</button>
                    <button id="rank4">Sehr gut</button>
                    <div id="buttonStatus"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Progress Container -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar">
            <div class="progress-indicator" id="progressIndicator"></div>
        </div>
        <div class="frame-time-indicator">
            <div class="current-position">Frame Position: <span id="current-Frame">{{ choosed_frame_number }}</span>/<span id="max_frame_number">{{ max_frame_number }}</span></div>
        </div>
    </div>

    <!-- Second Part -->
    
    <div class="frames-container-4">
        <!-- load per js
        {% for frame_path4 in frame_paths_4 %}
            <div class="frames-4" >
                <img src="{{ MEDIA_URL }}{{ frame_path4 }}" alt="frame">
            </div>
        {% endfor %}
        -->
    </div>
    
</body>

</html>
